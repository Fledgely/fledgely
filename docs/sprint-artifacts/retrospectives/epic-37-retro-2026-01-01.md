# Epic 37 Retrospective: Developmental Rights Recognition

**Date:** 2026-01-01
**Facilitator:** Bob (Scrum Master)
**Epic Status:** COMPLETE (6/6 stories done)

---

## Epic Summary

| Metric              | Value                                |
| ------------------- | ------------------------------------ |
| Epic                | 37: Developmental Rights Recognition |
| Stories Completed   | 6/6 (100%)                           |
| Total Tests Written | ~500+ tests across all stories       |
| Key Theme           | Privacy is a RIGHT, not earned       |

### Stories Completed

1. **37-1: Trust Milestone Definitions** - Trust milestones (80/90/95), 30-day duration requirement
2. **37-2: Reduced Screenshot Frequency** - Milestone-based frequency reduction (15m → 30m → 60m)
3. **37-3: Notification-Only Mode** - Near-graduation mode with daily summaries only
4. **37-4: Automatic Monitoring Reduction** - 6-month sustained 95%+ triggers automatic reduction
5. **37-5: Developmental Framing in UI** - "Recognizing growth" not "earned privacy" language
6. **37-6: Regression Handling** - 2-week grace period, conversation-first approach

---

## Team Participants

- **Bob (Scrum Master)** - Facilitation, story preparation
- **Charlie (Senior Dev)** - Implementation lead
- **Alice (Product Owner)** - Requirements, acceptance
- **Dana (QA Engineer)** - Test coverage verification
- **Elena (Junior Dev)** - Implementation support
- **Cns (Project Lead)** - Direction, approval

---

## What Went Well

### 1. Child Rights Advocate Philosophy Integration

The entire epic was successfully reframed from "Earned Autonomy" to "Developmental Rights Recognition." This philosophical shift permeated every story:

- Privacy framed as **inherent right**, not reward
- Language audit: "Recognizing your growth" replaces "You've earned"
- Regression handled with compassion, not punishment

**Quote from Story 37-5:**

> "Privacy is your right as you grow. Monitoring is temporary support."

### 2. Comprehensive Test Coverage

Every story achieved high test coverage with TDD approach:

| Story | Tests                                                |
| ----- | ---------------------------------------------------- |
| 37-1  | ~80 tests (milestones, notifications, progress)      |
| 37-2  | ~60 tests (frequency reduction service + components) |
| 37-3  | ~70 tests (notification-only mode, daily summaries)  |
| 37-4  | ~65 tests (automatic reduction, override flows)      |
| 37-5  | ~75 tests (developmental messaging, validation)      |
| 37-6  | ~192 tests (regression handling, all ACs verified)   |

### 3. Graceful Regression Handling

Story 37-6 implemented a thoughtful approach to trust score drops:

- **2-week grace period** before any monitoring changes
- **Conversation-first** - never automatic punishment
- **Child can explain** circumstances
- **Supportive framing** validated by punitive language detection

### 4. Consistent API Design

All services follow the same patterns:

- Zod schemas for validation
- Factory functions for object creation
- Clear separation: contracts (types) vs services (logic)
- Both child and parent viewerType support

---

## Challenges & Growth Areas

### 1. Import Path Resolution

**Challenge:** Multiple import errors where files referenced other modules that didn't exist yet or had different names.

**Example:** Story 37-6 initially imported from `./trustMilestones` but should have been `./developmentalMessaging`.

**Resolution:** Fixed by carefully checking existing exports and using correct module paths.

**Learning:** When creating new files that reference existing code, verify import paths against actual file structure.

### 2. Naming Conflicts in Shared Package

**Challenge:** Functions like `isInGracePeriod` and types like `RegressionNotification` already existed from earlier stories.

**Resolution:** Renamed exports with prefixes:

- `isInGracePeriod` → `isTrustRegressionInGracePeriod`
- `RegressionNotification` → `TrustRegressionNotification`

**Learning:** When adding to shared packages, check for existing exports to avoid conflicts.

### 3. Punitive Language Detection in Tests

**Challenge:** Tests checking for absence of punitive words failed because negated forms like "isn't about punishment" contain the word "punishment".

**Resolution:** Enhanced test to remove negated patterns before checking:

```typescript
const withoutNegation = allMessages
  .replace(/isn't about punishment/gi, '')
  .replace(/not punishment/gi, '')
```

**Learning:** Language validation tests need to handle negated contexts carefully.

### 4. Missing userEvent Library

**Challenge:** Component tests initially used `@testing-library/user-event` which wasn't installed.

**Resolution:** Replaced with `fireEvent` from `@testing-library/react`:

```typescript
// Before
await user.click(screen.getByTestId('show-explanation-form'))

// After
fireEvent.click(screen.getByTestId('show-explanation-form'))
```

**Learning:** Verify testing library availability before writing tests.

---

## Key Insights & Learnings

### 1. Philosophy-Driven Development

When an epic has a clear philosophical foundation (privacy as a right), implementation decisions become easier. Every feature can be evaluated against the principle.

### 2. Validation Functions Add Safety

Creating `validateDevelopmentalFraming()` and `validateSupportiveFraming()` functions ensures future code maintains the philosophy. These act as guardrails.

### 3. Grace Periods Build Trust

The 2-week grace period in regression handling isn't just feature design - it's a trust-building mechanism. Systems that give second chances align with family values.

### 4. Both-Party Views Matter

Every notification and component needs child AND parent versions. The `viewerType` pattern is now well-established and should continue.

---

## Previous Retrospective Follow-Through

**Note:** This is the first retrospective for the Trust/Graduation epic sequence. No previous retrospective for Epic 36 exists.

---

## Action Items

### Process Improvements

| #   | Action                                              | Owner   | Deadline       | Success Criteria          |
| --- | --------------------------------------------------- | ------- | -------------- | ------------------------- |
| 1   | Document import path conventions for shared package | Charlie | Before Epic 38 | README in packages/shared |
| 2   | Add lint rule for naming conflicts in exports       | Charlie | Before Epic 38 | ESLint configuration      |
| 3   | Standardize test library usage                      | Dana    | Before Epic 38 | Testing guide updated     |

### Technical Debt

| #   | Item                                               | Priority | Effort    |
| --- | -------------------------------------------------- | -------- | --------- |
| 1   | Consider extracting ViewerType into shared enum    | Low      | 1-2 hours |
| 2   | Unify grace period logic (milestone vs regression) | Medium   | 2-3 hours |

### Documentation

| #   | Item                                        | Owner       | Deadline       |
| --- | ------------------------------------------- | ----------- | -------------- |
| 1   | Document developmental messaging principles | Tech Writer | Before Epic 38 |
| 2   | Update milestone system architecture        | Charlie     | Before Epic 38 |

### Team Agreements

- Continue TDD approach with high test coverage
- Always validate language follows developmental framing
- Include both child and parent viewerType in all UI components
- 2-week grace periods for any negative transitions

---

## Epic 38 Preparation

### Next Epic: Graduation Path & Age 18 Deletion

**Goal:** Clear path to independence; automatic deletion at age 18.

**Stories (7 total):**

1. 38-1: Graduation Eligibility Tracking
2. 38-2: Graduation Conversation Trigger
3. 38-3: Formal Graduation Process
4. 38-4: Annual Proportionality Check
5. 38-5: Age 18 Automatic Deletion
6. 38-6: Pre-18 Data Export Option
7. 38-7: Post-Graduation Support

### Dependencies on Epic 37

Epic 38 builds directly on Epic 37's foundation:

| Dependency              | Epic 37 Source | Epic 38 Usage                               |
| ----------------------- | -------------- | ------------------------------------------- |
| Trust milestones        | Story 37-1     | Graduation eligibility (100% for 12 months) |
| Developmental messaging | Story 37-5     | Graduation conversation templates           |
| Notification-only mode  | Story 37-3     | Pre-graduation monitoring level             |
| Automatic reduction     | Story 37-4     | Path to graduation                          |

### Technical Prerequisites

| #   | Prerequisite                           | Owner   | Estimated Effort |
| --- | -------------------------------------- | ------- | ---------------- |
| 1   | Trust score 100% threshold calculation | Charlie | 2 hours          |
| 2   | 12-month duration tracking             | Charlie | 3 hours          |
| 3   | Age calculation from child profile     | Charlie | 1 hour           |

### Knowledge Gaps

None identified - Epic 37 established all necessary patterns.

---

## Critical Path

1. **Update sprint-status.yaml** - Mark Epic 37 complete ✅
2. **Create retrospective document** - This file ✅
3. **Begin Epic 38 story drafting** - When ready

---

## Readiness Assessment

| Area              | Status      | Notes                 |
| ----------------- | ----------- | --------------------- |
| Testing & Quality | ✅ Complete | All tests passing     |
| Deployment        | ✅ Ready    | Code committed        |
| Technical Health  | ✅ Stable   | No fragility concerns |
| Blockers          | ✅ None     | Ready for Epic 38     |

---

## Closing

**Bob (Scrum Master):** Epic 37 successfully delivered the philosophical foundation for child privacy rights. The "Developmental Rights Recognition" framing establishes that privacy is inherent, not earned. This sets the stage for Epic 38's graduation path.

**Key Takeaways:**

1. Philosophy-driven development produces coherent features
2. Language validation functions prevent regression to punitive framing
3. Grace periods and conversation-first approaches build family trust
4. Comprehensive testing ensures the philosophy is enforced in code

**Alice (Product Owner):** The Child Rights Advocate would approve. We've shifted from "earning privacy" to "recognizing growth" throughout the system.

**Charlie (Senior Dev):** Solid technical foundation. The patterns established here (milestones, messaging services, viewer types) will carry forward.

---

**Retrospective Status:** COMPLETE
**Next Step:** Epic 38 story creation when ready
